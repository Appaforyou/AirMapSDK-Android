<html>
	<head>
		<script src='turf.js'> </script>
		<script type="text/javascript">
			function init() {
				WebViewJavascriptBridge.init(function(message, responseCallback) {
                        var json = JSON.parse(message);
                        var features = json.features;

                        var result = {
                        	"type": "FeatureCollection",
                        	"features": []
                        }

                        features.forEach(function(feature) {
                        	var featureBuffer = feature.properties.buffer;
							var buffered = buffer(feature, featureBuffer, 'meters');
							result.features.push(buffered);
                        });

                        responseCallback(result);
                    });
			}

			if (window.WebViewJavascriptBridge) {
				init()
			} else {
				document.addEventListener(
					'WebViewJavascriptBridgeReady'
					, function() {
						init()
					},
					false
				);
			}
		</script>
	</head>
</html>